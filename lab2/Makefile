CXX=g++
CFLAGS=-O3 -c -Wall -std=c++11
CFLAGS_OMP=$(CFLAGS) -fopenmp

PARALLEL_SOURCE=parallel

SLE_GEN_SOURCE=gen_sle
SLE_GEN_EXE=gen-sle

CHECK_FILE=check
EXEC_EXT=out

all: $(PARALLEL_SOURCE).$(EXEC_EXT) $(SLE_GEN_EXE).$(EXEC_EXT) $(CHECK_FILE).$(EXEC_EXT)


$(PARALLEL_SOURCE).$(EXEC_EXT): $(PARALLEL_SOURCE).o
	$(CXX) -fopenmp $(PARALLEL_SOURCE).o -o $(PARALLEL_SOURCE).$(EXEC_EXT)

$(PARALLEL_SOURCE).o: $(PARALLEL_SOURCE).cpp
	$(CXX) $(CFLAGS_OMP) $(PARALLEL_SOURCE).cpp -o $(PARALLEL_SOURCE).o



$(SLE_GEN_EXE).$(EXEC_EXT): $(SLE_GEN_SOURCE).o
	$(CXX) $(SLE_GEN_SOURCE).o -o $(SLE_GEN_EXE).$(EXEC_EXT)

$(SLE_GEN_SOURCE).o: $(SLE_GEN_SOURCE).cpp
	$(CXX) $(CFLAGS) $(SLE_GEN_SOURCE).cpp -o $(SLE_GEN_SOURCE).o

$(CHECK_FILE).$(EXEC_EXT): $(CHECK_FILE).o
	$(CXX) $(CHECK_FILE).o -o $(CHECK_FILE).$(EXEC_EXT)

$(CHECK_FILE).o: $(CHECK_FILE).cpp $(HEADER)
	$(CXX) $(CFLAGS) $(CHECK_FILE).cpp -o $(CHECK_FILE).o

clean:
	rm -rf *.o
